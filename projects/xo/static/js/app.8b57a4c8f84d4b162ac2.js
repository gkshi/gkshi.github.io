webpackJsonp([1],{"2aAs":function(t,e){},HJnh:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("7+uW"),r=i("fC7K"),a=i("mvHQ"),n=i.n(a),o={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",t._g({class:t.getClass(),on:{click:function(e){return e.preventDefault(),t.strike(e)}}},{mouseenter:t.mouseenter,mouseleave:t.mouseleave}))},staticRenderFns:[]};var c={name:"Grid",components:{Cell:i("VU/8")({name:"Cell",props:["order"],data:function(){return{mark:"",empty:!0,hover:!1,frozen:!1}},watch:{mark:function(){this.length&&(this.empty=!1)}},computed:{activePlayerSign:function(){return this.$root.$children[0].activePlayerSign}},methods:{mouseenter:function(){this.empty&&!this.frozen&&(this.hover=!0)},mouseleave:function(){this.empty&&!this.frozen&&(this.hover=!1)},getClass:function(){var t="cell";return this.hover&&(t+=" cell--hover-"+this.activePlayerSign),this.mark.length&&(t+=" cell--"+this.mark),this.empty&&!this.frozen||(t+=" cell--disabled"),t},strike:function(){this.empty&&!this.frozen&&(this.empty=!1,this.hover=!1,this.mark=this.$root.$children[0].activePlayerSign,this.$bus.emit("strike",this.order))}},created:function(){var t=this;this.$bus.$on("clearGrid",function(){t.mark="",t.empty=!0,t.frozen=!1}),this.$bus.$on("freezeGrid",function(){t.frozen=!0}),this.$bus.$on("unfreezeGrid",function(){t.frozen=!1})}},o,!1,function(t){i("2aAs")},"data-v-fe7d5c3a",null).exports}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",this._l(9,function(t,i){return e("cell",{key:t.id,attrs:{order:i+1}})}),1)},staticRenderFns:[]};var l=i("VU/8")(c,h,!1,function(t){i("HJnh")},"data-v-19cb3d1a",null).exports,u=i("fZjL"),v=i.n(u),m={name:"Bot",methods:{getOtherSign:function(t){if(t)return"x"===t?"o":"x"},imitateClick:function(t,e){if(t){e||(e=500),this.$bus.emit("freezeGrid");var i=this;setTimeout(function(){i.$bus.emit("unfreezeGrid"),document.querySelector(".grid").children[t-1].click()},e)}},move:function(){var t=!1,e=null,i=this.$root.$children[0].cells,s=[],r=[],a=[],n=this.$root.$children[0].activePlayerSign,o=this.getOtherSign(n),c=this.$root.$children[0].winCombinations,h=[],l=[];if(v()(i).forEach(function(t){i[t]===n?s.push(Number(t)):i[t]===o?r.push(Number(t)):a.push(Number(t))}),c.forEach(function(t){var e=!0;for(var s in t)if(i[t[s]]===o){e=!1;break}e&&h.push(t)}),s.length>0&&h.every(function(s){var r=0,a=null;for(var o in s)i[s[o]]===n&&r++,i[s[o]].length||(a=s[o]);return!(r>1)||(e=a,t=!0,!1)}),t||(c.forEach(function(t){var e=!0;for(var s in t)if(i[t[s]]===n){e=!1;break}e&&l.push(t)}),l.every(function(s){var r=0,a=null;for(var n in s)i[s[n]]===o&&r++,i[s[n]].length||(a=s[n]);return!(r>1)||(e=a,t=!0,!1)})),t||i[5].length||(e=5,t=!0),!t)if(h.length){var u=Math.floor(Math.random()*h.length),m=null;h[u].every(function(t){return t%2&&!i[t].length?(m=t,!1):!!i[t].length||(m=t,!1)}),e=m}else{var f=Math.floor(Math.random()*a.length);e=a[f]}e&&this.imitateClick(e)}},created:function(){this.$bus.on("botMove",this.move)}},f={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{hidden:""}},[this._v(" ")])},staticRenderFns:[]},d={name:"App",data:function(){return{score:{x:0,o:0},activePlayer:"player1",activePlayerSign:"x",activePlayerText:"Начинайте игру",gameMode:"with_bot",gameStatus:"turn",gameWinCombination:null,gameStarter:"x",cells:{1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:""},winCombinations:[[1,2,3],[4,5,6],[7,8,9],[1,4,7],[2,5,8],[3,6,9],[1,5,9],[3,5,7]]}},methods:{start:function(){"with_bot"===this.gameMode&&"player1"!==this.activePlayer&&this.$bus.emit("botMove")},resetSettings:function(){this.gameStatus=this.$options.data().gameStatus,this.gameWinCombination=null,this.cells=this.$options.data().cells,this.$bus.emit("clearGrid")},restart:function(t){this.resetSettings(),t?(this.changeActivePlayer(),this.changePlayerText()):(this.changeActivePlayer(!0),this.changePlayerText(!0)),this.$bus.emit("unfreezeGrid"),this.start()},newRound:function(){"turn"!==this.gameStatus?this.restart(!0):this.restart()},makeMove:function(t){switch(this.cells[t]=this.activePlayerSign,this.checkGameStatus(t),this.gameStatus){case"turn":this.changeActivePlayer(),this.changePlayerText(),"bot"===this.activePlayer&&this.$bus.emit("botMove");break;case"draw":this.activePlayerText="Ничья",this.$bus.emit("freezeGrid");break;case"win":switch(this.gameMode){case"with_bot":"player1"===this.activePlayer?this.activePlayerText="Вы победили":this.activePlayerText="Победил бот";break;case"with_user":"player1"===this.activePlayer?this.activePlayerText="Победил игрок 1":this.activePlayerText="Победил игрок 2"}this.$bus.emit("freezeGrid"),this.score[this.activePlayerSign]++}},checkGameStatus:function(t){this.isWin(t)?this.gameStatus="win":this.isGridFull()?this.gameStatus="draw":this.gameStatus="turn"},isWin:function(t){var e=this,i=!1,s=this.cells[t],r=[];return this.winCombinations.forEach(function(e){for(var i in e)if(e[i]===t){r.push(e);break}}),r.every(function(t){var r=0;for(var a in t)e.cells[t[a]]===s&&r++;return 3!==r||(e.gameWinCombination=t.join(""),i=!0,!1)}),i},isGridFull:function(){var t=!0;for(var e in this.cells)if(!this.cells[e].length){t=!1;break}return t},changeActivePlayer:function(t){if(t)return this.activePlayer=this.$options.data().activePlayer,void(this.activePlayerSign=this.$options.data().activePlayerSign);"with_bot"===this.gameMode?"player1"===this.activePlayer?this.activePlayer="bot":this.activePlayer="player1":"player1"===this.activePlayer?this.activePlayer="player2":this.activePlayer="player1","x"===this.activePlayerSign?this.activePlayerSign="o":this.activePlayerSign="x"},changePlayerText:function(){"with_bot"===this.gameMode&&("player1"===this.activePlayer?this.activePlayerText="Ваш ход":this.activePlayerText="Ход бота"),"with_user"===this.gameMode&&("player1"===this.activePlayer?this.activePlayerText="Ход игрока 1":this.activePlayerText="Ход игрока 2")},changeGameMode:function(t){this.saveScore(),this.gameMode=t.target.value,this.getScore(),this.changeActivePlayer(!0),this.changePlayerText(),this.restart()},resetScore:function(){this.score={x:0,o:0}},getScore:function(){var t=null;switch(this.gameMode){case"with_bot":t=sessionStorage.getItem("score_bot");break;case"with_user":t=sessionStorage.getItem("score_user")}t?this.score=JSON.parse(t):this.resetScore()},saveScore:function(){var t=n()(this.score);switch(this.gameMode){case"with_bot":sessionStorage.setItem("score_bot",t);break;case"with_user":sessionStorage.setItem("score_user",t)}},getGridClass:function(){var t="grid";return this.gameWinCombination&&(t+=" grid--win-"+this.gameWinCombination),t},getButtonClass:function(){var t="button";return"turn"!==this.gameStatus&&(t+=" button--active"),t},clearSession:function(){sessionStorage.removeItem("score_bot"),sessionStorage.removeItem("score_user")}},computed:{},created:function(){var t=this;window.Game=this,this.clearSession(),this.$bus.on("strike",function(e){t.makeMove(e)}),this.$bus.$on("win",function(e){t.score[e]++}),this.start()},components:{Grid:l,Bot:i("VU/8")(m,f,!1,null,null,null).exports}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"}},[i("bot"),t._v(" "),t._m(0),t._v(" "),i("main",[i("div",{staticClass:"intro"},[i("div",{staticClass:"mode-toggle"},[i("label",[i("input",{attrs:{type:"radio",name:"mode",value:"with_bot",checked:""},on:{change:t.changeGameMode}}),t._v(" Игрок против бота\n        ")]),t._v(" "),i("label",[i("input",{attrs:{type:"radio",name:"mode",value:"with_user"},on:{change:t.changeGameMode}}),t._v(" 2 игрока ")])]),t._v(" "),i("section",{staticClass:"game"},[i("header",[i("div",[t._v(t._s(t.activePlayerText))]),t._v(" "),i("div",[t._v("Счет "+t._s(t.score.x)+":"+t._s(t.score.o))])]),t._v(" "),i("grid",{class:t.getGridClass()}),t._v(" "),i("footer",[i("a",{class:t.getButtonClass(),attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.newRound(e)}}},[t._v("Начать заново")])])],1)])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("div",{staticClass:"intro"},[e("h1",[this._v("Крестики-нолики онлайн")]),this._v(" "),e("div",{staticClass:"links"},[e("a",{attrs:{href:"https://github.com/gkshi/xo",target:"_blank"}},[this._v("GitHub")]),this._v(" "),e("a",{attrs:{href:"https://gkshi.github.io/",target:"_blank"}},[this._v("More projects")])])])])}]};var y=i("VU/8")(d,g,!1,function(t){i("Ze/N")},null,null).exports;s.a.use(r.a),s.a.config.productionTip=!1,new s.a({el:"#app",components:{App:y},template:"<App/>"})},"Ze/N":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8b57a4c8f84d4b162ac2.js.map